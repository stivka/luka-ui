<!doctypehtml><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>DOOM®</title><style>body,html{height:100%;margin:0;display:flex;justify-content:center;align-items:center;background-color:#f5f5f5;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;user-select:none;position:fixed;width:100%}.captcha-container{border:1px solid #ccc;background-color:#fff;outline:0;transition:box-shadow .3s ease;display:flex;justify-content:center;align-items:center;width:100%;height:100%}.captcha-container:focus{box-shadow:0 0 0 3px rgba(66,133,244,.3)}@media (min-width:768px){.captcha-canvas-container{width:480px}}.captcha-canvas{position:absolute;top:0;left:0;width:100%;height:100%;image-rendering:pixelated;pointer-events:none;opacity:.8;transition:opacity .15s ease}.captcha-container:focus .captcha-canvas{opacity:1}#status{text-align:center;color:#888;padding:8px 16px;background-color:#fff;border-radius:8px;font-size:20px;position:relative;z-index:99}.mobile-controls{display:none;position:absolute;bottom:30px;left:0;right:0;padding:10px;pointer-events:none;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none}@media (hover:none) and (pointer:coarse){.captcha-container:focus .mobile-controls{display:flex;justify-content:space-between;align-items:center}.captcha-container:focus .status-message.instructions{display:none}}.d-pad{display:grid;grid-template-columns:repeat(3,40px);grid-template-rows:repeat(3,40px);gap:5px;pointer-events:auto}.fire-button{width:60px;height:60px;border-radius:50%;background:rgba(255,255,255,.2);border:2px solid rgba(255,255,255,.3);pointer-events:auto;touch-action:none;-webkit-tap-highlight-color:transparent}.d-pad button{width:40px;height:40px;border-radius:8px;background:rgba(255,255,255,.2);border:2px solid rgba(255,255,255,.3);color:#fff;font-size:20px;display:flex;align-items:center;justify-content:center;pointer-events:auto;touch-action:none;-webkit-tap-highlight-color:transparent}.d-pad button:active,.fire-button:active{background:rgba(255,255,255,.3)}.d-pad .up{grid-column:2;grid-row:1}.d-pad .left{grid-column:1;grid-row:2}.d-pad .right{grid-column:3;grid-row:2}.d-pad .down{grid-column:2;grid-row:3}</style></head><body><div class=captcha-container tabindex=1><div class=captcha-canvas-container><div id=status>Downloading...</div><canvas class=captcha-canvas id=canvas oncontextmenu=event.preventDefault() tabindex=-1></canvas><div class=mobile-controls><div class=d-pad><button class=up>↑</button> <button class=left>←</button> <button class=right>→</button> <button class=down>↓</button></div><button class=fire-button></button></div></div></div><script>window.va=window.va||function(){(window.vaq=window.vaq||[]).push(arguments)}</script><script>document.addEventListener("touchstart",(e=>{!document.querySelector(".captcha-canvas-container").contains(e.target)&&captchaContainer.matches(":focus")&&captchaContainer.blur()}));const canvas=document.getElementById("canvas"),statusElement=document.getElementById("status"),captchaContainer=document.querySelector(".captcha-container");function logDebugMessage(e){console.log(e)}function restartGame(){logDebugMessage("Restarting game..."),Module._G_DoReborn()}document.addEventListener("DOMContentLoaded",(()=>{captchaContainer&&captchaContainer.focus()})),captchaContainer.addEventListener("focus",(()=>{"function"==typeof Module.resumeMainLoop?(Module.setStatus(""),Module.resumeMainLoop(),logDebugMessage("Resumed main loop.")):logDebugMessage("resumeMainLoop function is missing.")})),captchaContainer.addEventListener("blur",(()=>{Module.setStatus("Tap to play"),Module.pauseMainLoop(),logDebugMessage("CAPTCHA widget unfocused")}));const mobileControls={up:{keyCode:38},down:{keyCode:40},left:{keyCode:37},right:{keyCode:39},fire:{keyCode:32}};function ensureGameFocused(){captchaContainer.matches(":focus")||captchaContainer.focus()}function simulateKeyEvent(e,t){const n=new KeyboardEvent(e,{keyCode:t,bubbles:!0,cancelable:!0});captchaContainer.dispatchEvent(n)}function handleTouchStart(e){return t=>{t.preventDefault(),ensureGameFocused(),simulateKeyEvent("keydown",mobileControls[e].keyCode)}}function handleTouchEnd(e){return t=>{t.preventDefault(),ensureGameFocused(),simulateKeyEvent("keyup",mobileControls[e].keyCode)}}document.querySelector(".mobile-controls").addEventListener("touchstart",(e=>{ensureGameFocused()}),{passive:!1}),document.querySelectorAll(".d-pad button, .fire-button").forEach((e=>{let t=e.className.split(" ")[0];t&&"fire-button"!==t||(t="fire"),e.addEventListener("touchstart",handleTouchStart(t)),e.addEventListener("touchend",handleTouchEnd(t)),e.addEventListener("touchcancel",handleTouchEnd(t))}));let isStorageSyncing=!1;var Module={keyboardListeningElement:captchaContainer,arguments:["-autoreborn","-skill","4"],preRun:[function(){SDL.defaults.copyOnLock=!1;const e=SDL.lookupKeyCodeForEvent;SDL.lookupKeyCodeForEvent=function(t){return 88===t.keyCode?e({...t,keyCode:17}):77===t.keyCode?e({...t,keyCode:27}):t.metaKey?(t.preventDefault(),0):e(t)},FS.analyzePath("/doom_saves").exists||FS.mkdir("/doom_saves"),FS.mount(IDBFS,{},"/doom_saves"),console.log("Mounted IDBFS, syncing from IndexedDB..."),FS.syncfs(!0,(function(e){e?console.error("Failed to sync from IndexedDB:",e):(console.log("Successfully loaded saved data from IndexedDB."),console.log("Files after sync:",FS.readdir("/doom_saves")))}))}],postRun:[],onSaveGame:function(){console.log("Game saved: Syncing IndexedDB..."),isStorageSyncing?console.warn("Sync already in progress, skipping..."):(isStorageSyncing=!0,FS.syncfs(!1,(function(e){isStorageSyncing=!1,e?console.error("Failed to sync to IndexedDB after save:",e):console.log("Auto-sync: Save data persisted to IndexedDB.")})))},onPlayerBorn:function(){logDebugMessage("Player born")},onPlayerDeath:function(){logDebugMessage("Player died")},onEnemyKilled:function(){logDebugMessage("Enemy killed")},print:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.log(e),logDebugMessage(e)},printErr:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.error(e),logDebugMessage("Error: "+e)},canvas:canvas,setStatus:function(e){if(!e)return void(statusElement.style.display="none");if(Module.setStatus.last||(Module.setStatus.last={time:Date.now(),text:""}),e===Module.setStatus.last.text)return;const t=e.match(/([^(]+)$$(\d+(\.\d+)?)\/(\d+)$$/),n=Date.now();t&&n-Module.setStatus.last.time<30||(Module.setStatus.last.time=n,Module.setStatus.last.time=n,Module.setStatus.last.text=e,statusElement.innerHTML=e,statusElement.style.display="block")},totalDependencies:0,monitorRunDependencies:function(e){this.totalDependencies=Math.max(this.totalDependencies,e),Module.setStatus(e?"Preparing... ("+(this.totalDependencies-e)+"/"+this.totalDependencies+")":"All downloads complete.")}};Module.setStatus("Downloading ..."),window.onerror=function(){Module.setStatus("Exception thrown, see JavaScript console"),Module.setStatus=function(e){e&&Module.printErr("[post-exception status] "+e)}}</script><script async src=doom.js></script></body></html>